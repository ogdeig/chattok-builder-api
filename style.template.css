/* =========================================================
   ChatTok Game Template â€” style.template.css
   - 9:16 friendly, mobile readable
   - Clean overlay + game screen
   - Optional right-side flags (if used)
   - Theme variables injected by API:
     __THEME_PRIMARY__, __THEME_SECONDARY__, __THEME_BACKGROUND__
========================================================= */

:root{
  --bg0: __THEME_BACKGROUND__;
  --bg1: rgba(255,255,255,.06);
  --bg2: rgba(255,255,255,.04);
  --line: rgba(255,255,255,.12);

  --text: rgba(255,255,255,.96);
  --muted: rgba(255,255,255,.72);

  /* brand defaults */
  --pink: __THEME_PRIMARY__;
  --aqua: __THEME_SECONDARY__;

  --good: #2ee59d;
  --bad: #ff4d4d;
  --warn: #ffcc66;

  --shadow: 0 18px 60px rgba(0,0,0,.55);
  --shadow2: 0 10px 30px rgba(0,0,0,.45);

  --r: 18px;
  --r2: 14px;

  --font: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

  --maxW: 540px;     /* mobile-friendly width for 9:16 */
  --hudH: 96px;      /* bottom HUD reserve */
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:var(--font);
  background:
    radial-gradient(900px 520px at 15% -10%, rgba(0,242,234,.20), transparent 55%),
    radial-gradient(820px 520px at 85% -10%, rgba(255,0,80,.18), transparent 55%),
    radial-gradient(1100px 800px at 50% 120%, rgba(0,0,0,.65), transparent 60%),
    linear-gradient(180deg, #040914 0%, var(--bg0) 55%, #020611 100%);
  color:var(--text);
  overflow:hidden;
}

/* Core containers (ids from index.template.html) */
#app{min-height:100%;width:100%}

#gameRoot{
  position:relative;
  width:100%;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:stretch;
}

/* Main 9:16 stage */
#gameScreen{
  position:relative;
  width:min(var(--maxW), 100vw);
  min-height:100vh;
  background:
    radial-gradient(700px 520px at 50% 0%, rgba(255,255,255,.06), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border-left:1px solid rgba(255,255,255,.06);
  border-right:1px solid rgba(255,255,255,.06);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
  overflow:hidden;
}

/* Canvas / stage area placed by game.js */
.stage{
  position:absolute;
  inset:0;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* Top header bar */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
  border-radius:var(--r);
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:var(--shadow2);
}

.brand{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.brand .title{
  font-weight:900;
  letter-spacing:.2px;
  font-size:18px;
  line-height:1.1;
}
.brand .sub{
  font-size:12px;
  color:var(--muted);
  line-height:1.15;
}

/* Connection pill */
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.20);
  font-size:12px;
  color:var(--muted);
  user-select:none;
}
.pill .dot{
  width:10px;height:10px;border-radius:99px;
  background:var(--bad);
  box-shadow:0 0 0 3px rgba(255,77,77,.18);
}
.pill.connected .dot{
  background:var(--good);
  box-shadow:0 0 0 3px rgba(46,229,157,.18);
}
.pill strong{color:var(--text)}

/* Main play area card */
.playcard{
  flex:1;
  position:relative;
  border-radius:var(--r);
  background:
    radial-gradient(650px 430px at 50% 20%, rgba(0,242,234,.10), transparent 55%),
    radial-gradient(650px 430px at 50% 70%, rgba(255,0,80,.10), transparent 55%),
    rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:var(--shadow);
  overflow:hidden;
}

/* Canvas element created by game.js */
canvas.gameCanvas{
  display:block;
  width:100%;
  height:100%;
}

/* Bottom HUD */
.hud{
  height:var(--hudH);
  border-radius:var(--r);
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:var(--shadow2);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding:10px 12px;
}

.hud .left,
.hud .right{
  display:flex;
  gap:10px;
  align-items:center;
}

.stat{
  display:flex;
  flex-direction:column;
  gap:2px;
  min-width:74px;
}
.stat .k{
  font-size:11px;
  color:var(--muted);
}
.stat .v{
  font-size:18px;
  font-weight:900;
  letter-spacing:.2px;
}

/* Meter */
.meter{
  flex:1;
  height:14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.25);
  overflow:hidden;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}
.meter > i{
  display:block;
  height:100%;
  width:0%;
  background: linear-gradient(90deg, var(--aqua), var(--pink));
}

/* Setup overlay (already has fallback CSS in HTML; this refines it) */
#setupOverlay .overlay-card{
  background:
    radial-gradient(640px 420px at 15% 0%, rgba(0,242,234,.16), transparent 55%),
    radial-gradient(640px 420px at 85% 0%, rgba(255,0,80,.14), transparent 55%),
    rgba(255,255,255,.06);
}

#setupOverlay input[type="text"], #setupOverlay input[type="number"]{
  background:rgba(0,0,0,.22);
}

#setupOverlay button#startGameBtn{
  background: linear-gradient(90deg, rgba(0,242,234,.20), rgba(255,0,80,.20));
  border:1px solid rgba(255,255,255,.16);
}

/* Flags (optional pop-outs on right side) */
#flags{
  position:fixed;
  top:84px;
  right:10px;
  width:min(320px, 46vw);
  display:flex;
  flex-direction:column;
  gap:10px;
  pointer-events:none;
  z-index:30;
}

.flag{
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px 12px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.40);
  box-shadow:var(--shadow2);
  transform: translateX(24px);
  opacity:0;
  animation: flagIn .18s ease-out forwards, flagOut .22s ease-in forwards;
  animation-delay: 0s, 2.4s;
}

@keyframes flagIn{
  from{transform:translateX(24px);opacity:0}
  to{transform:translateX(0);opacity:1}
}
@keyframes flagOut{
  from{transform:translateX(0);opacity:1}
  to{transform:translateX(24px);opacity:0}
}

.flag .pfp{
  width:40px;height:40px;border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  overflow:hidden;
  flex:0 0 auto;
}
.flag .pfp img{width:100%;height:100%;object-fit:cover;display:block}

.flag .txt{
  flex:1;
  min-width:0;
  line-height:1.15;
}
.flag .who{
  font-weight:900;
  font-size:13px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.flag .msg{
  font-size:13px;
  color:rgba(255,255,255,.86);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  margin-top:2px;
}

/* Status text in-game */
#statusTextInGame{
  padding:6px 10px;
  border-radius:999px;
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.10);
}

/* Small screens */
@media (max-width: 520px){
  #flags{width:min(340px, 70vw)}
  .hud{height:92px}
  .stat .v{font-size:17px}
}

/* Ultra small */
@media (max-width: 380px){
  .brand .title{font-size:16px}
  .hud{padding:10px}
  .stat{min-width:66px}
}
